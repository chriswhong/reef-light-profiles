{"version":3,"sources":["ProfileChart.jsx","ProfileCard.jsx","Homepage.jsx","Authenticate.jsx","util/build-aip.js","Profile.jsx","Dropzone.jsx","NewProfile.jsx","Dashboard.jsx","UserPage.jsx","CreateUsername.jsx","NavbarComponent.js","react-auth0-spa.js","util/api.js","App.js","serviceWorker.js","index.js"],"names":["ProfileChart","props","chartContainer","React","createRef","data","this","colorData","Object","keys","ramp","colors","map","color","name","values","point","intensity","parseInt","_text","time","d3","current","select","remove","containerWidth","offsetWidth","containerHeight","offsetHeight","margin","top","right","bottom","left","width","height","xTickValues","xScale","domain","xMax","range","yScale","line","x","d","y","svg","append","attr","axisBottom","tickValues","tickSize","tickFormat","call","selectAll","g","forEach","datum","points","enter","style","on","mouse","lines","document","getElementsByClassName","i","position","beginning","end","getTotalLength","target","Math","floor","getPointAtLength","text","invert","toFixed","filename","className","ref","Component","ProfileCard","profile","settings","title","icon","faUser","username","faClock","moment","updatedAt","fromNow","to","_id","Homepage","profileCards","recentlyAdded","key","src","Authenticated","setUsername","getTokenSilently","loading","useState","noUsernameFound","setNoUsernameFound","useEffect","a","token","fetch","headers","Authorization","then","json","res","error","getUsername","js2xmlparser","require","BuildAIP","header","checksum","colorsXml","parse","match","replace","length","charCodeAt","getChecksum","Profile","params","setErrors","setProfile","catch","err","fetchData","description","onClick","aip","pom","createElement","bb","Blob","type","setAttribute","window","URL","createObjectURL","dataset","downloadurl","download","href","join","draggable","classList","add","click","baseStyle","flex","display","flexDirection","alignItems","padding","borderWidth","borderRadius","borderColor","borderStyle","backgroundColor","outline","transition","activeStyle","acceptStyle","rejectStyle","DropZone","onDrop","useCallback","acceptedFiles","reader","FileReader","onabort","console","log","onerror","onload","binaryStr","result","onFileParse","file","readAsBinaryString","useDropzone","multiple","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","withRouter","saveProfile","setTitle","setDescription","setSettings","handleChange","e","id","value","handleSave","history","push","valid","for","placeholder","onChange","rows","disabled","Dropzone","xml","convert","xml2js","compact","handleParsedFile","Dashboard","profiles","UserPage","setError","submitUsername","method","body","JSON","stringify","user","updateUsername","forhtml","aria-describedby","class","NavbarComponent","loginWithRedirect","isAuthenticated","logout","userNav","Item","nickname","faEllipsisH","Link","redirect_uri","Brand","faFish","Toggle","aria-controls","Collapse","DEFAULT_REDIRECT_CALLBACK","replaceState","location","pathname","Auth0Context","createContext","fetchUsername","process","App","auth0","useContext","store","setStore","fetchRecentlyAdded","exact","path","render","Authenticate","component","Boolean","hostname","ReactDOM","children","onRedirectCallback","initOptions","setIsAuthenticated","setUser","auth0Client","setAuth0","setLoading","popupOpen","setPopupOpen","createAuth0Client","auth0FromHook","search","includes","handleRedirectCallback","appState","getUser","initAuth0","loginWithPopup","Provider","getIdTokenClaims","getTokenWithPopup","config","client_id","clientId","audience","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a9bc89dd.chunk.js","sourcesContent":["import React from 'react'\nimport * as d3 from 'd3'\n\nclass ProfileChart extends React.Component {\n  constructor (props) {\n    super(props)\n    this.chartContainer = React.createRef()\n  }\n\n  componentDidMount () {\n    const { data } = this.props\n\n    // clean up the data so it looks like\n    // [\n    //   {\n    //     name: 'blue',\n    //     values: [\n    //       {\n    //         time: 0,\n    //         intensity: 0\n    //       },\n    //       ...\n    //     ]\n    //   },\n    //   ...\n    // ]\n    const colorData = Object.keys(data.ramp.colors).map((color) => {\n      return {\n        name: color,\n        values: data.ramp.colors[color].point.map((point) => {\n          return {\n            intensity: parseInt(point.intensity._text),\n            time: parseInt(point.time._text)\n          }\n        })\n      }\n    })\n\n\n    if (data) {\n      d3.select(this.chartContainer.current).select('svg').remove()\n      // chart based on https://bl.ocks.org/gordlea/27370d1eea8464b04538e6d8ced39e89\n\n      const { offsetWidth: containerWidth, offsetHeight: containerHeight } = this.chartContainer.current\n      // TODO get the width of the container and do everything dynamically\n      const margin = { top: 35, right: 30, bottom: 60, left: 26 }\n      const width = containerWidth - margin.left - margin.right\n      const height = containerHeight - margin.top - margin.bottom\n\n      const xMax = 1440 // x axis is # of minutes in a day\n      const yMax = 2000 // assume 2000 is max y, not sure what max intensity can be\n      const xTickValues = [0, 240, 480, 720, 960, 1200, 1440]\n      const yTickValues = [0, 500, 1000, 1500, 2000]\n\n      const xScale = d3.scaleLinear()\n        .domain([0, xMax - 1])\n        .range([0, width])\n\n      const yScale = d3.scaleLinear()\n        .domain([0, yMax])\n        .range([height, 0])\n\n      const line = d3.line()\n        .x(function (d) { return xScale(parseInt(d.time)) })\n        .y(function (d) { return yScale(parseInt(d.intensity)) })\n\n      const svg = d3.select(this.chartContainer.current).append('svg')\n        .attr('width', width + margin.left + margin.right)\n        .attr('height', height + margin.top + margin.bottom)\n        .append('g')\n        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\n      const axisBottom = d3.axisBottom(xScale)\n        .tickValues(xTickValues)\n        .tickSize(0)\n        .tickFormat((d) => {\n          // handle midnight\n          if (d === 0 || d === 1440) return '12AM'\n          // handle noon\n          if (d === 720) return '12AM'\n          // handle pm\n          if (d > 720) return `${(d - 720) / 60}PM`\n          return `${d / 60}AM`\n        })\n\n      // x axis\n      svg.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', 'translate(0,' + (height) + ')')\n        .call(axisBottom)\n        .selectAll('text')\n        .attr('dy', '1.5em')\n\n      // x axis on top\n      svg.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', 'translate(0,-50)')\n        .call(axisBottom)\n        .call(g => g.select('.domain').remove())\n        .selectAll('text')\n        .attr('dy', '1.5em')\n\n      // add vertical gridlines\n      svg.append('g')\n        .attr('class', 'grid')\n        .attr('transform', 'translate(0,' + height + ')')\n        .call(\n          d3.axisBottom(xScale)\n            .tickValues(xTickValues)\n            .tickSize(-height)\n            .tickFormat('')\n        )\n        .call(g => g.select('.domain').remove())\n\n      // add horizontal gridlines\n      svg.append('g')\n        .attr('class', 'grid')\n        .call(\n          d3.axisLeft(yScale)\n            .tickValues(yTickValues)\n            .tickSize(-width)\n            .tickFormat('')\n        )\n        .call(g => g.select('.domain').remove())\n\n      // for each color in the data, render a line\n      colorData.forEach((color) => {\n        svg.append('path')\n          .datum(color.values)\n          .attr('class', `line ${color.name}`)\n          .attr('d', line)\n      })\n\n      // render circles below the x-axis for each time specified in the file\n      const points = colorData[0].values.map(d => d.time)\n      svg.selectAll('.dot')\n        .data(points)\n        .enter().append('circle')\n        .attr('class', 'dot')\n        .attr('cx', d => xScale(d))\n        .attr('cy', height + 20)\n        .attr('r', 5)\n\n      // mouseover effect\n      // https://bl.ocks.org/larsenmtl/e3b8b7c2ca4787f77d78f58d41c3da91\n\n      svg.append('path') // this is the black vertical line to follow mouse\n        .attr('class', 'mouse-line')\n        .style('stroke', 'black')\n        .style('stroke-width', '1px')\n        .style('opacity', '0')\n\n      svg.append('rect') // append a rect to catch mouse movements on canvas\n        .attr('width', width) // can't catch mouse events on a g element\n        .attr('height', height)\n        .attr('fill', 'none')\n        .attr('pointer-events', 'all')\n        .on('mouseout', function () { // on mouse out hide line, circles and text\n          d3.select('.mouse-line')\n            .style('opacity', '0')\n          d3.selectAll('.mouse-per-line circle')\n            .style('opacity', '0')\n          d3.selectAll('.mouse-per-line text')\n            .style('opacity', '0')\n        })\n        .on('mouseover', function () { // on mouse in show line, circles and text\n          d3.select('.mouse-line')\n            .style('opacity', '1')\n          d3.selectAll('.mouse-per-line circle')\n            .style('opacity', '1')\n          d3.selectAll('.mouse-per-line text')\n            .style('opacity', '1')\n        })\n        .on('mousemove', function () { // mouse moving over canvas\n          var mouse = d3.mouse(this)\n          d3.select('.mouse-line')\n            .attr('d', function () {\n              var d = 'M' + mouse[0] + ',' + height\n              d += ' ' + mouse[0] + ',' + 0\n              return d\n            })\n\n          var lines = document.getElementsByClassName('line')\n\n          d3.selectAll('.mouse-per-line')\n            .attr('transform', function (d, i) {\n              // start with the full length of the line\n              var beginning = 0\n              var end = lines[i].getTotalLength()\n              var target = null\n\n              let position\n\n              // follow the line along the x dimension\n              // slice the line into smaller and smaller segments until\n              // the midpoint matches the mouse's x position\n              // now we know the y position\n              while (true) {\n                target = Math.floor((beginning + end) / 2)\n                position = lines[i].getPointAtLength(target)\n\n                // handle begginning and end\n                if ((target === end || target === beginning) && position.x !== mouse[0]) {\n                  break\n                }\n\n                if (position.x > mouse[0]) end = target\n                else if (position.x < mouse[0]) beginning = target\n                else break // position found when x = mouse[0]\n              }\n\n              d3.select(this).select('text')\n                .text(yScale.invert(position.y).toFixed(2))\n\n              return 'translate(' + mouse[0] + ',' + position.y + ')'\n            })\n        })\n\n      var mousePerLine = svg.selectAll('.mouse-per-line')\n        .data(colorData)\n        .enter()\n        .append('g')\n        .attr('class', 'mouse-per-line')\n\n      mousePerLine.append('circle')\n        .attr('r', 7)\n        .attr('class', d => d.name)\n        .style('fill', 'none')\n        .style('stroke-width', '1px')\n        .style('opacity', '0')\n    }\n  }\n\n  render () {\n    const { filename } = this.props\n    return (\n      <div className='chart-container'>\n        <div className='chart' ref={this.chartContainer}></div>\n      </div>\n    )\n  }\n}\n\nexport default ProfileChart\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser, faClock } from '@fortawesome/free-solid-svg-icons'\n\nimport ProfileChart from './ProfileChart'\n\nconst ProfileCard = ({ profile }) => {\n  return (\n    <div className='card profile-card' style={{ width: '18rem' }}>\n      <div className='card-img-top'>\n        <ProfileChart data={profile.settings} />\n      </div>\n      <div className='card-body'>\n        <h5 className='card-title'>{profile.title}</h5>\n        <p className='card-text'>\n          <FontAwesomeIcon icon={faUser}/> {profile.username}\n          &nbsp;\n          <FontAwesomeIcon icon={faClock}/> {moment(profile.updatedAt).fromNow()}\n        </p>\n        <Link to={`/${profile.username}/profile/${profile._id}`} className='btn btn-secondary'>View Profile</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default ProfileCard\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport ProfileCard from './ProfileCard'\n\nconst Homepage = ({ recentlyAdded }) => {\n  let profileCards\n  if (recentlyAdded) {\n    profileCards = recentlyAdded.map((profile, i) => (\n      <ProfileCard key={i} profile={profile}/>\n    ))\n  }\n\n  return (\n    <>\n    <div className='hero-container'>\n      <div className='container'>\n        <div className='row'>\n          <div className='col-12 col-md-6 hero'>\n            <h1>Reef Light Profiles</h1>\n            <p>A place to find and share light programs for your reef aquarium.</p>\n            <div className='btn btn-primary'>Sign Up</div>\n          </div>\n          <div className='col-12 col-md-6 hero-image '>\n            <img src='images/chart.png'/>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div className='container recently-added'>\n      <div className='row'>\n        <div className='col-9'>\n          <h4> Recently Added Profiles </h4>\n          {profileCards}\n        </div>\n      </div>\n    </div>\n    </>\n  )\n}\n\nexport default Homepage\n","import React, { useState, useEffect } from 'react'\nimport { Redirect } from 'react-router-dom'\n\nconst Authenticated = ({ setUsername, getTokenSilently, loading, username }) => {\n  const [noUsernameFound, setNoUsernameFound] = useState(false)\n\n  useEffect(() => {\n    // check if username exists\n    async function getUsername () {\n      if (!loading) {\n        const token = await getTokenSilently()\n        await fetch('/api/user', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })\n          .then(d => d.json())\n          .then((res) => {\n            if (res.error) {\n              setNoUsernameFound(true)\n            }\n\n            setUsername(res.username)\n          })\n      }\n    }\n\n    getUsername()\n  }, [loading, getTokenSilently])\n\n  if (noUsernameFound) {\n    return <Redirect to=\"/create-username\" />\n  }\n\n  if (username) {\n    return <Redirect to=\"/dashboard\" />\n  }\n\n  return (\n    <>\n      <h1>Authenticated</h1>\n    </>\n  )\n}\n\nexport default Authenticated\n","const js2xmlparser = require('js2xmlparser')\n\n// original function copied from http://thereefuge.com/threads/reverse-engineering-a-hydra-26-hd.15524/\n// calculates the checksum based on the 'colors' xml element\nconst getChecksum = (json) => {\n  // convert json to xml and get only the colors element\n  const colorsXml = js2xmlparser.parse('ramp', json.ramp)\n    .match(/(<colors>.+?<\\/colors>)/gms)[0]\n    .replace(/(\\r\\n|\\n|\\r|\\s+)/gm, '')\n\n  let checksum = 0\n\n  if (colorsXml.length === 0) return\n\n  for (var i = 0; i < colorsXml.length; i += 1) {\n    const charCode = colorsXml.charCodeAt(i)\n    checksum = ((checksum << 5) - checksum) + charCode\n    checksum = checksum & 4294967295\n  }\n  if (checksum < 0) checksum = ~checksum\n  return checksum\n}\n\nconst BuildAIP = (settings) => {\n  settings.ramp.header.checksum = getChecksum(settings)\n  const xml = js2xmlparser.parse('ramp', settings.ramp)\n  return xml\n}\n\nexport default BuildAIP\n","import React from 'react'\nimport moment from 'moment'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser, faClock } from '@fortawesome/free-solid-svg-icons'\n\nimport BuildAIP from './util/build-aip'\nimport ProfileChart from './ProfileChart.jsx'\n\nconst Profile = (props) => {\n  const { _id } = props.match.params\n\n  const [hasError, setErrors] = React.useState(false)\n  const [profile, setProfile] = React.useState({})\n\n  React.useEffect(() => {\n    async function fetchData () {\n      const res = await fetch(`/api/profile/${_id}/`)\n      res.json()\n        .then(res => setProfile(res))\n        .catch(err => setErrors(err))\n    }\n\n    fetchData()\n  }, [_id])\n\n  const { title, description, settings } = profile\n\n  const downloadProfile = () => {\n    const aip = BuildAIP(settings)\n\n    var pom = document.createElement('a')\n    var filename = 'settings.aip'\n    var bb = new Blob([aip], { type: 'text/plain' })\n\n    pom.setAttribute('href', window.URL.createObjectURL(bb))\n    pom.setAttribute('download', filename)\n\n    pom.dataset.downloadurl = ['text/plain', pom.download, pom.href].join(':')\n    pom.draggable = true\n    pom.classList.add('dragout')\n\n    pom.click()\n  }\n\n  return (\n    <div className='container content'>\n      <div className='row'>\n        <div className='col-4'>\n          <div className='title-block'>\n            <h2>{title}</h2>\n            <FontAwesomeIcon icon={faUser}/> {profile.username}\n            &nbsp;\n            &nbsp;\n            &nbsp;\n            <FontAwesomeIcon icon={faClock}/> {moment(profile.updatedAt).fromNow()}\n          </div>\n          <div className='content-block'>\n            <h5> Description </h5>\n            { description }\n          </div>\n          <div className='content-block'>\n            <div className='btn btn-primary' onClick={downloadProfile}>Download .aip</div>\n          </div>\n        </div>\n        <div className='col-8'>\n          <h4>Preview</h4>\n          {settings && <ProfileChart filename='foo' data={settings}/>}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Profile\n","import React, { useCallback, useMemo } from 'react'\nimport { useDropzone } from 'react-dropzone'\n\nconst baseStyle = {\n  flex: 1,\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  padding: '50px',\n  borderWidth: 2,\n  borderRadius: 18,\n  borderColor: 'rgb(179, 179, 179)',\n  borderStyle: 'dashed',\n  backgroundColor: '#fafafa',\n  color: 'rgb(179, 179, 179)',\n  outline: 'none',\n  transition: 'border .24s ease-in-out'\n}\n\nconst activeStyle = {\n  borderColor: '#2196f3'\n}\n\nconst acceptStyle = {\n  borderColor: '#00e676'\n}\n\nconst rejectStyle = {\n  borderColor: '#ff1744'\n}\n\nconst DropZone = (props) => {\n  const onDrop = useCallback(acceptedFiles => {\n    const reader = new FileReader()\n\n    reader.onabort = () => console.log('file reading was aborted')\n    reader.onerror = () => console.log('file reading has failed')\n    reader.onload = () => {\n      // Do whatever you want with the file contents\n      const binaryStr = reader.result\n      props.onFileParse(binaryStr, acceptedFiles[0].name)\n    }\n\n    acceptedFiles.forEach(file => reader.readAsBinaryString(file))\n  }, [])\n\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    isDragAccept,\n    isDragReject\n  } = useDropzone({\n    multiple: false,\n    onDrop\n  })\n\n  const style = useMemo(() => ({\n    ...baseStyle,\n    ...(isDragActive ? activeStyle : {}),\n    ...(isDragAccept ? acceptStyle : {}),\n    ...(isDragReject ? rejectStyle : {})\n  }), [\n    isDragActive,\n    isDragReject\n  ])\n\n  return (\n    <section>\n      <div {...getRootProps({ className: 'dropzone', style })}>\n        <input {...getInputProps()} />\n        <p>Drag and drop a .aip file here, or click to select one</p>\n      </div>\n    </section>\n  )\n}\n\nexport default DropZone\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport convert from 'xml-js'\nimport ProfileChart from './ProfileChart.jsx'\nimport Dropzone from './Dropzone'\n\nconst NewProfile = (props) => {\n  const { saveProfile, username } = props\n  const [title, setTitle] = React.useState('')\n  const [description, setDescription] = React.useState('')\n  const [settings, setSettings] = React.useState(null)\n\n  const handleParsedFile = (xml, filename) => {\n    const json = convert.xml2js(xml, { compact: true })\n    setSettings(json)\n  }\n\n  const resetSettings = () => {\n    setSettings(null)\n  }\n\n  const handleChange = (e) => {\n    const { id, value } = e.target\n    if (id === 'title') setTitle(value)\n    if (id === 'description') setDescription(value)\n  }\n\n  const handleSave = async () => {\n    const data = {\n      title,\n      description,\n      settings\n    }\n\n    const { _id } = await saveProfile(data)\n    props.history.push(`/${username}/profile/${_id}`)\n  }\n\n  const valid = title && description && settings\n\n  return (\n    <div className='container'>\n      <div className='row'>\n        <div className='col-8'>\n          <h2>New Light Profile</h2>\n          <p>Enter a title and description, then drag in your .aip file below.</p>\n          <div className='form-group'>\n            <label for='title'>Title</label>\n            <input type='text' className='form-control' id='title' placeholder='Enter a title for this profile' value={title} onChange={handleChange} />\n          </div>\n          <div className='form-group'>\n            <label for='description'>Description</label>\n            <textarea className='form-control' id='description' rows='3' value={description} onChange={handleChange}></textarea>\n          </div>\n        </div>\n        <div className='col-4'>\n          <button type=\"button\" className=\"publish-btn btn btn-primary btn-lg\" onClick={handleSave} disabled={!valid}>Publish Profile</button>\n        </div>\n      </div>\n      <div className='row'>\n        <div className='col-md-12'>\n          <div className='form-group'>\n            <label for='exampleFormControlTextarea1'>Light Settings {settings && <span className='small link-like' onClick={resetSettings}>reset</span>}</label>\n            {\n              settings\n                ? <ProfileChart filename='foo' data={settings}/>\n                : <Dropzone onFileParse={(xml, filename) => handleParsedFile(xml, filename)} />\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default withRouter(NewProfile)\n","import React, { useState, useEffect } from 'react'\nimport {\n  Link\n} from 'react-router-dom'\n\nimport ProfileCard from './ProfileCard'\n\nconst Dashboard = ({ username, profiles }) => {\n  let profileCards = <p>No Profiles</p>\n\n  if (profiles) {\n    profileCards = profiles.map((profile, i) => (\n      <ProfileCard key={i} profile={profile}/>\n    ))\n  }\n\n  return (\n    <div className='container'>\n      <h3>Dashboard for {username}</h3>\n      <h5>Your Lighting Profiles</h5>\n      <div className='d-flex justify-content-around'>\n        {profileCards}\n      </div>\n      <Link to='/new'>Add a new lighting profile</Link>\n    </div>\n  )\n}\n\nexport default Dashboard\n","import React, { useState, useEffect } from 'react'\nimport {\n  Link\n} from 'react-router-dom'\n\nconst UserPage = () => {\n\n  return (\n    <div className='container'>\n      UserPage\n    </div>\n  )\n}\n\nexport default UserPage\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\n\nconst CreateUsername = (props) => {\n  const { getTokenSilently, setUsername: updateUsername } = props\n  const [username, setUsername] = React.useState('')\n  const [error, setError] = React.useState('')\n\n  const submitUsername = async () => {\n    const token = await getTokenSilently()\n\n    await fetch('/api/user', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({ username })\n    })\n      .then(d => d.json())\n      .then((res) => {\n        if (res.error) {\n          setError(res.error)\n        }\n\n        // update the user\n        res.user && props.updateUsername(res.user)\n        // navigate to user page\n        props.history.push('/')\n      })\n  }\n\n  const handleChange = (e) => {\n    setUsername(e.target.value)\n  }\n\n  return (\n    <div className='container'>\n      <div className=\"col-12 col-md-6 offset-md-3\">\n        <p>Please create a username before continuing</p>\n        <div className='form-group'>\n          <label forhtml='username'>Username</label>\n          <input type='text' className='form-control' value={username} id='username' aria-describedby='usernameError' placeholder=\"Enter a username\" onChange={handleChange}/>\n          {error && <small id=\"usernameError\" class=\"form-text text-muted text-danger\">{error}</small>}\n        </div>\n        <button type=\"submit\" className=\"btn btn-primary\" onClick={submitUsername}>Submit</button>\n      </div>\n    </div>\n  )\n}\n\nexport default withRouter(CreateUsername)\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport NavDropdown from 'react-bootstrap/NavDropdown'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faFish, faUser, faEllipsisH } from '@fortawesome/free-solid-svg-icons'\n\nconst NavbarComponent = ({ user, username, isAuthenticated, loginWithRedirect, logout }) => {\n  let userNav = null\n\n  if (user) {\n    userNav = (\n      <>\n      <Nav.Item>\n        <Link to='/dashboard' className='nav-link'>\n          Dashboard\n        </Link>\n      </Nav.Item>\n      <Nav.Item>\n        <Link to={`/${username}`} className='nav-link'>\n          <FontAwesomeIcon icon={faUser}/> {user.nickname}\n        </Link>\n      </Nav.Item>\n      <NavDropdown title={<FontAwesomeIcon icon={faEllipsisH}/>} id=\"collasible-nav-dropdown\">\n        <NavDropdown.Item onClick={() => { logout() }}>Sign Out</NavDropdown.Item>\n      </NavDropdown>\n      </>\n    )\n  } else {\n    userNav = (\n      <>\n        <Nav.Item>\n          <Nav.Link href=\"/\" onClick={() => {\n            loginWithRedirect({\n              redirect_uri: 'http://localhost:3000/dashboard'\n            })\n          }}>Sign In</Nav.Link>\n        </Nav.Item>\n      </>\n    )\n  }\n\n  return (\n    <Navbar className=\"navbar navbar-expand-lg\">\n      <Navbar.Brand><Link to=\"/\" className='nav-link'><FontAwesomeIcon icon={faFish} /> Reef Light Profiles</Link></Navbar.Brand>\n      <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n      <Navbar.Collapse id=\"responsive-navbar-nav\">\n        <Nav className='ml-auto'>\n          {userNav}\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  )\n}\n\nexport default NavbarComponent\n","import React, { useState, useEffect, useContext } from 'react'\nimport createAuth0Client from '@auth0/auth0-spa-js'\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n  window.history.replaceState({}, document.title, window.location.pathname)\n\nexport const Auth0Context = React.createContext()\nexport const useAuth0 = () => useContext(Auth0Context)\nexport const Auth0Provider = ({\n  children,\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n  ...initOptions\n}) => {\n  const [isAuthenticated, setIsAuthenticated] = useState()\n  const [user, setUser] = useState()\n  const [auth0Client, setAuth0] = useState()\n  const [loading, setLoading] = useState(true)\n  const [popupOpen, setPopupOpen] = useState(false)\n\n  useEffect(() => {\n    const initAuth0 = async () => {\n      const auth0FromHook = await createAuth0Client(initOptions)\n      setAuth0(auth0FromHook)\n\n      if (window.location.search.includes('code=')) {\n        const { appState } = await auth0FromHook.handleRedirectCallback()\n        onRedirectCallback(appState)\n      }\n\n      const isAuthenticated = await auth0FromHook.isAuthenticated()\n\n      setIsAuthenticated(isAuthenticated)\n\n      if (isAuthenticated) {\n        const user = await auth0FromHook.getUser()\n        setUser(user)\n      }\n\n      setLoading(false)\n    }\n    initAuth0()\n    // eslint-disable-next-line\n  }, []);\n\n  const loginWithPopup = async (params = {}) => {\n    setPopupOpen(true)\n    try {\n      await auth0Client.loginWithPopup(params)\n    } catch (error) {\n      console.error(error)\n    } finally {\n      setPopupOpen(false)\n    }\n    const user = await auth0Client.getUser()\n    setUser(user)\n    setIsAuthenticated(true)\n  }\n\n  const handleRedirectCallback = async () => {\n    setLoading(true)\n    await auth0Client.handleRedirectCallback()\n    const user = await auth0Client.getUser()\n    setLoading(false)\n    setIsAuthenticated(true)\n    setUser(user)\n  }\n  return (\n    <Auth0Context.Provider\n      value={{\n        isAuthenticated,\n        user,\n        loading,\n        popupOpen,\n        loginWithPopup,\n        handleRedirectCallback,\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\n        getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\n        logout: (...p) => auth0Client.logout(...p)\n      }}\n    >\n      {children}\n    </Auth0Context.Provider>\n  )\n}\n","console.log('BUILDING process.env', process.env)\n\nasync function fetchUsername (token) {\n  // pass jwt, get username and profiles\n  return fetch('/api/user', {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  })\n    .then(d => d.json())\n}\n\nasync function fetchRecentlyAdded () {\n  return fetch('/api/recently-added')\n    .then(d => d.json())\n}\n\nexport {\n  fetchUsername,\n  fetchRecentlyAdded\n}\n","import React, { useState, useEffect } from 'react'\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Switch,\n  Route,\n  Link\n} from 'react-router-dom'\nimport Homepage from './Homepage'\nimport Authenticate from './Authenticate'\nimport Profile from './Profile'\nimport NewProfile from './NewProfile'\nimport Dashboard from './Dashboard'\nimport UserPage from './UserPage'\nimport CreateUsername from './CreateUsername'\nimport NavbarComponent from './NavbarComponent'\nimport { useAuth0 } from './react-auth0-spa'\n\nimport { fetchUsername, fetchRecentlyAdded } from './util/api'\n\nconst App = (props) => {\n  const auth0 = useAuth0()\n  const { loading, user, loginWithRedirect, logout, getTokenSilently } = auth0\n\n  const [store, setStore] = useState({})\n\n  const saveProfile = async (profile) => {\n    const token = await getTokenSilently()\n    return fetch('http://localhost:3000/api/profile', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(profile) // body data type must match \"Content-Type\" header\n    })\n      .then(d => d.json())\n  }\n\n  useEffect(() => {\n    // once user exists, if there is no username, go get it\n    if (user) {\n      if (!store.username) {\n        const getUsername = async () => {\n          const token = await getTokenSilently()\n          fetchUsername(token)\n            .then((res) => {\n              if (res.error) {\n                // setNoUsernameFound(true)\n              }\n              const { username, profiles } = res\n              setStore({\n                ...store,\n                username,\n                profiles\n              })\n            })\n        }\n\n        getUsername()\n      }\n    }\n  }, [user])\n\n  // get recently added\n  useEffect(() => {\n    if (!store.recentlyAdded) {\n      fetchRecentlyAdded()\n        .then((res) => {\n          if (res.error) {\n            // setNoUsernameFound(true)\n          }\n          const profiles = res\n          setStore({\n            ...store,\n            recentlyAdded: profiles\n          })\n        })\n    }\n  })\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <NavbarComponent user={user} username={store.username} loginWithRedirect={loginWithRedirect} logout={logout} />\n        <div className=\"content\">\n          <Switch>\n            <Route exact path=\"/\">\n              <Homepage recentlyAdded={store.recentlyAdded} />\n            </Route>\n            <Route path=\"/new\" >\n              <NewProfile username={store.username} saveProfile={saveProfile}/>\n            </Route>\n            <Route\n              path=\"/authenticate\"\n              render={() => <Authenticate />}\n            />\n            <Route path=\"/dashboard\">\n              <Dashboard user={user} username={store.username} profiles={store.profiles}/>\n            </Route>\n            <Route path=\"/create-username\">\n              <CreateUsername />\n            </Route>\n            <Route path=\"/:username/profile/:_id\" component={Profile} />\n            <Route path=\"/:username\" component={UserPage}/>\n          </Switch>\n        </div>\n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport { Auth0Provider } from './react-auth0-spa'\n\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './App.css'\nimport config from './auth_config.json'\n\nReactDOM.render(\n  <Auth0Provider\n    domain={config.domain}\n    client_id={config.clientId}\n    redirect_uri={'http://localhost:3000/dashboard'}\n    audience={config.audience}\n  >\n    <App />\n  </Auth0Provider>\n  , document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}